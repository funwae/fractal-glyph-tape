# Test configuration for quick local testing
# Uses smaller numbers for faster execution

project_name: "fgt_test_v1"
random_seed: 42

# Data ingestion settings
ingest:
  input_path: "data/raw"
  output_path: "data/test_phrases.jsonl"
  min_tokens: 3
  max_tokens: 50
  languages:
    - "en"
  target_phrase_count: 100  # Small for quick testing

  segmenter:
    method: "nltk"
    language: "english"

  filters:
    min_length: 10
    max_length: 500
    remove_duplicates: true

# Embedding settings
embed:
  model_name: "sentence-transformers/all-MiniLM-L6-v2"
  batch_size: 32
  device: "cpu"  # Use CPU for testing
  max_seq_length: 256
  output_path: "embeddings/test_v1"
  shard_size: 100
  save_format: "npy"

# Clustering settings
cluster:
  method: "minibatch_kmeans"
  n_clusters: 20  # Small number for testing
  batch_size: 100
  max_iter: 50
  n_init: 1
  embeddings_path: "embeddings/test_v1"
  output_path: "clusters/test_v1"
  compute_coherence: true
  extract_examples: true
  examples_per_cluster: 3

# Cluster metadata extraction
metadata:
  top_phrases_per_cluster: 5
  compute_statistics: true
  stats_include:
    - size
    - centroid_norm
    - intra_cluster_distance
    - coherence_score

# Glyph assignment settings
glyph:
  alphabet_path: "src/glyph/mandarin_alphabet.txt"
  default_alphabet_size: 1000  # Smaller for testing
  max_glyph_length: 3
  encoding_base: null
  output_path: "clusters/test_v1/glyph_mapping.msgpack"

# Fractal tape builder settings
tape:
  projection_method: "pca"  # Faster than UMAP for testing
  projection_dims: 2

  pca:
    random_state: 42

  fractal_type: "triangular"
  max_depth: 8  # Slightly shallower for testing

  output_path: "tape/test_v1"
  storage_format: "sqlite"
  create_indexes: true
  index_types:
    - "glyph_id"
    - "cluster_id"
    - "fractal_address"

# Evaluation settings
eval:
  test_phrases_path: "data/test_phrases.jsonl"
  test_size: 50
  metrics:
    - compression_ratio
    - reconstruction_quality
    - cluster_coherence
  reconstruction:
    method: "nearest_centroid"
    similarity_metric: "cosine"
  results_path: "results/test_v1"
  save_plots: false
  plot_format: "png"

# Logging settings
logging:
  level: "INFO"
  output_path: "logs/fgt_test.log"
  console_output: true
  log_progress: true
  log_statistics: true
  log_examples: true
  examples_count: 3

# Resource limits
resources:
  max_memory_gb: 8
  gpu_memory_fraction: 0.5
  num_workers: 2

# Experimental features
experimental:
  enable_hybrid_tokenizer: false
  enable_cross_lingual: false
  enable_online_updates: false
